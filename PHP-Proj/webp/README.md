# WebP优化插件

自动将上传的图片优化为WebP格式，可配置质量参数和转换设置，支持JPEG、PNG转WebP优化。

## 主要功能

1. **自动转换** - 上传图片时自动转换为WebP格式
2. **质量控制** - 可设置WebP压缩质量(1-100)
3. **格式选择** - 可选择转换JPEG和/或PNG格式
4. **尺寸控制** - 支持设置最大宽度和高度，自动缩放
5. **原图保留** - 可选择保留或删除原始图片
6. **多种压缩方式** - 支持GD库和ImageMagick两种压缩引擎
7. **智能检测** - 自动检测系统支持的图像处理库
8. **推荐设置** - 提供最佳实践的参数推荐

## 系统要求

- WordPress 4.0+
- PHP 7.0+
- GD库或ImageMagick扩展
- WebP支持

## 安装方法

1. 将插件文件上传到 `/wp-content/plugins/webp-optimizer/` 目录
2. 在WordPress后台激活插件
3. 进入 "设置" -> "WebP优化" 进行配置

## 配置说明

### 基本设置

- **启用WebP转换**: 勾选后插件开始工作
- **WebP质量**: 推荐值85，可根据需要调整(1-100)
- **转换JPEG图片**: 将JPEG/JPG格式转换为WebP
- **转换PNG图片**: 将PNG格式转换为WebP

### 高级设置

- **保留原图**: 转换后是否保留原始文件
- **最大宽度/高度**: 超过此尺寸的图片将被缩放
- **压缩方式**: 选择GD库或ImageMagick

### 推荐设置

- **WebP质量**: 85（高质量）、75（平衡）、65（高压缩）
- **转换格式**: 同时启用JPEG和PNG转换
- **保留原图**: 建议不保留（节省存储空间）
- **最大尺寸**: 根据网站需求，推荐宽度1920像素
- **压缩方式**: 自动选择（优先使用ImageMagick）

## 效果对比

WebP格式相比传统格式的优势：
- 比JPEG小25-35%
- 比PNG小80%以上
- 支持透明度和动画
- 现代浏览器广泛支持

## 使用说明

1. 启用插件后，新上传的图片将自动转换
2. 转换仅对新上传的图片生效
3. 不影响已存在的文件
4. 转换过程可能延长上传时间

## 注意事项

- 建议在启用前备份重要图片
- 如果保留原图将占用双倍存储空间
- 转换过程需要一定的服务器资源
- 老旧浏览器可能不支持WebP格式

## 技术特性

- 钩子：`wp_handle_upload` 和 `wp_handle_sideload`
- 支持GD库和ImageMagick双引擎
- 自动检测系统支持
- 完整的错误处理机制
- 响应式管理界面

## 更新日志

### 1.0.0
- 初始版本发布
- 支持JPEG/PNG转WebP
- 可配置质量和尺寸参数
- 支持GD和ImageMagick
- 完整的管理界面

## 支持

如有问题请访问：https://cs.yuelk.com

## 开源协议

GPL v2 或更高版本